---
layout: post
title: "250527 TIL"
subtitle: "유니티 숙련 조별과제"
date: 2025-05-27
author: codingnewwbie
---

## 유니티 숙련 조별과제
비동기 프로그래밍 = Non-Blocking IO

io 작업에 대해 어떤 문제가 생기고, 이런 문제때문에 나온 게 NBI 이다.


C# async await 문법 기초
await --> 콜백 값 반환

함수에 반환타입 3가지.
void - 쓰면 안된다. 사용하는 경우가 거의 없다. 이벤트 핸들러 등 외부에서 결과를 받을 필요 없을 때. 버튼의 경우(TASK는 안되서)
Task - 비동기 작업 완료를 알릴 때.(실질적으로 void)
Task<T> - 비동기 작업 후 결과 값을 반환할 때.

비동기에 대한 정보를 가지는 Task 객체를 생성해서 .Net라이브러리에서 관리해 주는 것.

예외처리
callback 방식에서는 try-catch가 안된다.
async void일 경우에도 예외 전파가 안 되어 try-catch가 안된다.
Task 반환 안한다 == 에러에 대한 정보조차 없는 것.


병렬 비동기 처리
Task.WhenAll(t1, t2)를 넣으면, 동시에 실행되지만 다 끝날때까지 기다려서 제일 오래 걸리는 시간까지 기다린다.



유니티와 async await 관계
모든 엔진 API(Transform, GameObject, Animator 등) 는 Main Thread에서만 접근 가능하다.
비동기 코드라도 유니티 관련 코드는 Main Thread로 복귀해야 접근 가능.
유니티 안에서 멀티쓰레드를 쓸 수 없게 막아놓은 것. 
이유 : 멀티쓰레드 프로그램은 어렵고, 코드 읽기도 힘들고 해서.
그래서 렌더쓰레드, 로직쓰레드, 피직쓰레드 등 따로 있다.
사용은 하지만 너희들(=개발자)이 접근할 수 있는 건 MainThread만 준 것.


유니티에서 올바른 비동기 호출
웹 API 호출, (UI, 게임요소 멈춤 없이 자연스러운 요청 처리)
파일 저장/불러오기(저장 중 멈춤 없이 비동기 처리)
리소스 로딩(로딩바와 같은 로딩화면 연출 가능)
yield return WaitForSeconds 대신 사용

코루틴 vs 비동기


UniTask
유니티에서 Task를 조금 더 효율적으로 쓸 수 있게 만든 라이브러리
제대로 사용하려면 Task를 잘 써야 잘 쓸 수 있다.
Struct(구조체), 유니티전용. C# 7.3 이상 사용 가능. 



